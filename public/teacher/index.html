<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QAcademy — Teacher</title>
  <link rel="stylesheet" href="/assets/app.css" />
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <div class="dot"></div>
      <div>
        <div class="brand-title">QAcademy</div>
        <div class="brand-sub">Teacher dashboard</div>
      </div>
    </div>
    <div class="top-actions">
      <a class="btn ghost" href="/teacher/bank.html">Bank</a>
      <a class="btn ghost" href="/student/">Student</a>
      <button class="btn ghost" id="btnSignOut" type="button">Sign out</button>
    </div>
  </div>

  <main class="wrap">
    <section class="card">
      <h1>Teacher</h1>
      <p class="muted">Verified teacher access is required to stay on this page.</p>

      <div class="banner" id="status">Checking…</div>

      <div class="divider"></div>

      <div class="kv">
        <div class="k">Teacher ID</div>
        <div class="v" id="teacherId">—</div>
      </div>
      <div class="kv">
        <div class="k">Role</div>
        <div class="v" id="role">—</div>
      </div>
      <div class="kv">
        <div class="k">Plan</div>
        <div class="v" id="plan">—</div>
      </div>
      <div class="kv">
        <div class="k">Name</div>
        <div class="v" id="name">—</div>
      </div>
      <div class="kv">
        <div class="k">Email</div>
        <div class="v" id="email">—</div>
      </div>

      <div class="divider"></div>

      <div class="row gap">
        <a class="btn" href="/teacher/bank.html">Open Question Bank</a>
      </div>
    </section>
  </main>

  <script src="/assets/app.js"></script>
  <script>
    (function(){
      document.getElementById('btnSignOut').addEventListener('click', QA.signOut);

      (async function(){
        if (!QA.requireTokenOrBridge("/teacher/")) return;

        const vr = await QA.requireTeacherOrRoute();
        if (!vr || !vr.ok || !vr.teacher_ok) return;

        document.getElementById('status').textContent = "Teacher verified ✓";

        document.getElementById('teacherId').textContent = (vr.teacher && vr.teacher.teacher_id) || '';
        document.getElementById('role').textContent = (vr.user && vr.user.role) || '';
        document.getElementById('plan').textContent = (vr.teacher && vr.teacher.plan_type) || '';
        document.getElementById('name').textContent = (vr.user && vr.user.name) || '';
        document.getElementById('email').textContent = (vr.user && vr.user.email) || '';
      })();
    })();
  </script>
</body>
</html>
